dsl_version: 0.4.0
service:
  name: grafana
  ports:
    - {{ grafana.port }}
  containers:
    - name: grafana
      image: grafana
      probes:
        readiness: "true"
        liveness:
          command: "true"
          type: "exec"
      daemon:
        command: /usr/sbin/grafana-server --homepath=/usr/share/grafana --config=/etc/grafana/grafana.ini
                 cfg:default.paths.data=/var/lib/grafana
                 cfg:default.paths.logs=/var/log/grafana
        files:
          - grafana.ini
      volumes:
        - name: grafana-data
          type: empty-dir
          path: /var/lib/grafana

files:
  grafana.ini:
    path: /etc/grafana/grafana.ini
    content: grafana.ini.j2
